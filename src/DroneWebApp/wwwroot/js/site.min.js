var drones=[];(function worker(){$.get("http://localhost:8680/api/drone?t="+Math.floor(Math.random()*1e3+1),function(n){for(var t,r,u,i=0;i<n.length;i++)t=n[i],r=drones.indexOf(t.Id),r===-1?(console.log("New drone id ["+t.Id+"]"),$(".DroneList").append("<li><div class=drone"+t.Id+">Id: "+t.Id+", Altitude: "+t.State.Altitude+", Longitude: "+t.State.Longitude+", Latitude: "+t.State.Latitude+"<\/div><\/li>"),drones.push(t.Id)):(console.log("Drone id ["+t.Id+"] already exists"),console.log(t.State),u=drones[r].State,t.State===null?console.log("ERROR: State is null!"):t.State===u?console.log("State not changed"):(console.log("Updating state"),$(".drone"+t.Id).html("Id: "+t.Id+"<\/br>, Alt: "+t.State.Altitude+"<\/br>, Lon: "+t.State.Longitude+"<\/br>, Lat: "+t.State.Latitude+"<\/br>, Hea: "+t.State.Heading+"<\/br>, Vel: "+t.State.Speed)));setTimeout(worker,2e3)})})();